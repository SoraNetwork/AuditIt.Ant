import{u as k}from"./categoryStore-BBHgkhYa.js";import{d as C,r as q,H as w,p as B,o as S,q as c,w as n,c as o,e as r,l as p,b as U,F as j,n as F,j as R,t as V,B as D,h as m}from"./index-DF7ggzEI.js";const H=C({__name:"ItemDefinitionForm",props:{initialValues:{type:Object,default:()=>({})}},setup(f,{expose:_}){const v=f,s=q(),e=w({name:"",categoryId:void 0,unit:"",description:""}),l=k(),g={name:[{required:!0,message:"请输入物品名称！"}],categoryId:[{required:!0,message:"请选择一个分类！"}],unit:[{required:!0,message:"请输入单位！"}]};return B(()=>v.initialValues,u=>{u&&Object.assign(e,u)},{immediate:!0,deep:!0}),S(()=>{l.categories.length===0&&l.fetchCategories()}),_({validate:async()=>{if(s.value)return await s.value.validate(),D(e)}}),(u,a)=>{const d=r("a-input"),i=r("a-form-item"),y=r("a-select-option"),b=r("a-select"),x=r("a-textarea"),I=r("a-form");return m(),c(I,{ref_key:"formRef",ref:s,model:e,rules:g,layout:"vertical",name:"item_definition_form"},{default:n(()=>[o(i,{label:"物品名称",name:"name"},{default:n(()=>[o(d,{value:e.name,"onUpdate:value":a[0]||(a[0]=t=>e.name=t)},null,8,["value"])]),_:1}),o(i,{label:"分类",name:"categoryId"},{default:n(()=>[o(b,{value:e.categoryId,"onUpdate:value":a[1]||(a[1]=t=>e.categoryId=t),placeholder:"请选择一个分类",loading:p(l).loading},{default:n(()=>[(m(!0),U(j,null,F(p(l).categories,t=>(m(),c(y,{key:t.id,value:t.id},{default:n(()=>[R(V(t.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","loading"])]),_:1}),o(i,{label:"单位",name:"unit"},{default:n(()=>[o(d,{value:e.unit,"onUpdate:value":a[2]||(a[2]=t=>e.unit=t)},null,8,["value"])]),_:1}),o(i,{label:"描述",name:"description"},{default:n(()=>[o(x,{value:e.description,"onUpdate:value":a[3]||(a[3]=t=>e.description=t)},null,8,["value"])]),_:1})]),_:1},8,["model"])}}});export{H as _};
