import{u as k}from"./categoryStore-CeXZ3TSr.js";import{d as C,r as w,E as S,p as U,h as q,l as c,w as n,c as o,b as r,u as p,a as B,F,G as R,y as V,o as m,f as j,H as D}from"./index-u8WKHaNm.js";const G=C({__name:"ItemDefinitionForm",props:{initialValues:{type:Object,default:()=>({})}},setup(f,{expose:_}){const v=f,s=w(),e=S({name:"",categoryId:void 0,unit:"",description:""}),l=k(),g={name:[{required:!0,message:"请输入物品名称！"}],categoryId:[{required:!0,message:"请选择一个分类！"}],unit:[{required:!0,message:"请输入单位！"}]};return U(()=>v.initialValues,u=>{u&&Object.assign(e,u)},{immediate:!0,deep:!0}),q(()=>{l.categories.length===0&&l.fetchCategories()}),_({validate:async()=>{if(s.value)return await s.value.validate(),V(e)}}),(u,a)=>{const d=r("a-input"),i=r("a-form-item"),y=r("a-select-option"),b=r("a-select"),x=r("a-textarea"),I=r("a-form");return m(),c(I,{ref_key:"formRef",ref:s,model:e,rules:g,layout:"vertical",name:"item_definition_form"},{default:n(()=>[o(i,{label:"物品名称",name:"name"},{default:n(()=>[o(d,{value:e.name,"onUpdate:value":a[0]||(a[0]=t=>e.name=t)},null,8,["value"])]),_:1}),o(i,{label:"分类",name:"categoryId"},{default:n(()=>[o(b,{value:e.categoryId,"onUpdate:value":a[1]||(a[1]=t=>e.categoryId=t),placeholder:"请选择一个分类",loading:p(l).loading},{default:n(()=>[(m(!0),B(F,null,R(p(l).categories,t=>(m(),c(y,{key:t.id,value:t.id},{default:n(()=>[j(D(t.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","loading"])]),_:1}),o(i,{label:"单位",name:"unit"},{default:n(()=>[o(d,{value:e.unit,"onUpdate:value":a[2]||(a[2]=t=>e.unit=t)},null,8,["value"])]),_:1}),o(i,{label:"描述",name:"description"},{default:n(()=>[o(x,{value:e.description,"onUpdate:value":a[3]||(a[3]=t=>e.description=t)},null,8,["value"])]),_:1})]),_:1},8,["model"])}}});export{G as _};
