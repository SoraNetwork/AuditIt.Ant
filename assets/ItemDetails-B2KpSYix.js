import{d as U,r as A,D as _,h as C,i as T,a as D,c as t,e as u,w as e,u as p,k as V,b as n,f as i,H as a,F,G as M,o as f,l as R}from"./index-u8WKHaNm.js";import{u as W}from"./itemStore-C9Un4TLC.js";import{u as $}from"./auditLogStore-BDzyTSar.js";import{u as E}from"./warehouseStore-BK6tO4bK.js";import{u as G}from"./itemDefinitionStore-BpODQP4K.js";import{S as H}from"./constants-B77X9tuq.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"page-container"},q=U({__name:"ItemDetails",setup(z){const S=T(),w=V(),c=W(),h=$(),m=E(),d=G(),o=A(null),v=_(()=>o.value?.status?H[o.value.status]||{text:"未知",color:"gray"}:{text:"加载中...",color:"gray"}),x=_(()=>d.itemDefinitions.find(s=>s.id===o.value?.itemDefinitionId)?.name||"加载中..."),b=_(()=>m.warehouses.find(s=>s.id===o.value?.warehouseId)?.name||"加载中...");return C(async()=>{const s=S.params.id;m.warehouses.length===0&&m.fetchWarehouses(),d.itemDefinitions.length===0&&d.fetchItemDefinitions(),await c.fetchItems({id:s}),c.items.length>0&&(o.value=c.items[0],await h.fetchLogs({itemId:s}))}),(s,g)=>{const k=n("a-tag"),y=n("a-page-header"),l=n("a-descriptions-item"),N=n("a-descriptions"),I=n("a-card"),B=n("a-timeline-item"),L=n("a-timeline");return f(),D("div",null,[t(y,{title:`物品详情: ${o.value?.shortId}`,onBack:g[0]||(g[0]=r=>p(w).back())},{extra:e(()=>[t(k,{color:v.value.color},{default:e(()=>[i(a(v.value.text),1)]),_:1},8,["color"])]),_:1},8,["title"]),u("div",j,[t(I,{loading:p(c).loading},{default:e(()=>[t(N,{bordered:"",column:2},{default:e(()=>[t(l,{label:"物品名称"},{default:e(()=>[i(a(x.value),1)]),_:1}),t(l,{label:"所属仓库"},{default:e(()=>[i(a(b.value),1)]),_:1}),t(l,{label:"可视化ID"},{default:e(()=>[i(a(o.value?.shortId),1)]),_:1}),t(l,{label:"最后更新"},{default:e(()=>[i(a(o.value?.lastUpdated),1)]),_:1}),t(l,{label:"UUID",span:2},{default:e(()=>[i(a(o.value?.id),1)]),_:1})]),_:1})]),_:1},8,["loading"]),t(I,{title:"生命周期日志",style:{"margin-top":"16px"}},{default:e(()=>[t(L,null,{default:e(()=>[(f(!0),D(F,null,M(p(h).logs,r=>(f(),R(B,{key:r.id},{default:e(()=>[u("p",null,[u("strong",null,a(r.action),1),i(" - "+a(r.timestamp),1)]),u("p",null,"操作人: "+a(r.user),1),u("p",null,"仓库: "+a(r.warehouseName),1)]),_:2},1024))),128))]),_:1})]),_:1})])])}}}),ee=P(q,[["__scopeId","data-v-91bde9d2"]]);export{ee as default};
