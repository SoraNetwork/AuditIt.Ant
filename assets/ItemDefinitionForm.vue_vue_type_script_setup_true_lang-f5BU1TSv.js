import{u as k}from"./categoryStore-DbIQhYwz.js";import{d as I,r as C,L as w,w as S,o as U,y as c,f as n,c as o,g as r,p,e as q,F as B,v as R,m as V,x as j,H as D,k as d}from"./index-DMT2AIMY.js";const H=I({__name:"ItemDefinitionForm",props:{initialValues:{type:Object,default:()=>({})}},setup(f,{expose:_}){const v=f,l=C(),e=w({name:"",categoryId:void 0,unit:"个",description:""}),s=k(),g={name:[{required:!0,message:"请输入物品名称！"}],categoryId:[{required:!0,message:"请选择一个分类！"}],unit:[{required:!0,message:"请输入单位！"}]};return S(()=>v.initialValues,u=>{u&&Object.assign(e,u)},{immediate:!0,deep:!0}),U(()=>{s.categories.length===0&&s.fetchCategories()}),_({validateFields:async()=>{if(l.value)return await l.value.validate(),D(e)},resetFields:()=>{l.value?.resetFields()}}),(u,a)=>{const m=r("a-input"),i=r("a-form-item"),y=r("a-select-option"),x=r("a-select"),F=r("a-textarea"),b=r("a-form");return d(),c(b,{ref_key:"formRef",ref:l,model:e,rules:g,layout:"vertical",name:"item_definition_form"},{default:n(()=>[o(i,{label:"物品名称",name:"name"},{default:n(()=>[o(m,{value:e.name,"onUpdate:value":a[0]||(a[0]=t=>e.name=t)},null,8,["value"])]),_:1}),o(i,{label:"分类",name:"categoryId"},{default:n(()=>[o(x,{value:e.categoryId,"onUpdate:value":a[1]||(a[1]=t=>e.categoryId=t),placeholder:"请选择一个分类",loading:p(s).loading},{default:n(()=>[(d(!0),q(B,null,R(p(s).categories,t=>(d(),c(y,{key:t.id,value:t.id},{default:n(()=>[V(j(t.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","loading"])]),_:1}),o(i,{label:"单位",name:"unit"},{default:n(()=>[o(m,{value:e.unit,"onUpdate:value":a[2]||(a[2]=t=>e.unit=t)},null,8,["value"])]),_:1}),o(i,{label:"描述",name:"description"},{default:n(()=>[o(F,{value:e.description,"onUpdate:value":a[3]||(a[3]=t=>e.description=t)},null,8,["value"])]),_:1})]),_:1},8,["model"])}}});export{H as _};
