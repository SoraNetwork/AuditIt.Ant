import{d as U,r as A,B as _,o as C,f as T,b as D,c as t,k as u,w as e,l as p,H as V,e as n,j as i,G as a,F as E,E as F,h as f,n as M}from"./index-BsCkXfkc.js";import{u as R}from"./itemStore-eIcaqihB.js";import{u as W}from"./auditLogStore-C1MC1OBR.js";import{u as $}from"./warehouseStore-CIqF35uC.js";import{u as j}from"./itemDefinitionStore-9ujBXIeZ.js";import{S as G}from"./constants-B77X9tuq.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"page-container"},q=U({__name:"ItemDetails",setup(z){const S=T(),w=V(),c=R(),h=W(),m=$(),d=j(),o=A(null),v=_(()=>o.value?.status?G[o.value.status]||{text:"未知",color:"gray"}:{text:"加载中...",color:"gray"}),x=_(()=>d.itemDefinitions.find(s=>s.id===o.value?.itemDefinitionId)?.name||"加载中..."),b=_(()=>m.warehouses.find(s=>s.id===o.value?.warehouseId)?.name||"加载中...");return C(async()=>{const s=S.params.id;m.warehouses.length===0&&m.fetchWarehouses(),d.itemDefinitions.length===0&&d.fetchItemDefinitions(),await c.fetchItems({id:s}),c.items.length>0&&(o.value=c.items[0],await h.fetchLogs({itemId:s}))}),(s,g)=>{const k=n("a-tag"),y=n("a-page-header"),l=n("a-descriptions-item"),B=n("a-descriptions"),I=n("a-card"),N=n("a-timeline-item"),L=n("a-timeline");return f(),D("div",null,[t(y,{title:`物品详情: ${o.value?.shortId}`,onBack:g[0]||(g[0]=r=>p(w).back())},{extra:e(()=>[t(k,{color:v.value.color},{default:e(()=>[i(a(v.value.text),1)]),_:1},8,["color"])]),_:1},8,["title"]),u("div",P,[t(I,{loading:p(c).loading},{default:e(()=>[t(B,{bordered:"",column:2},{default:e(()=>[t(l,{label:"物品名称"},{default:e(()=>[i(a(x.value),1)]),_:1}),t(l,{label:"所属仓库"},{default:e(()=>[i(a(b.value),1)]),_:1}),t(l,{label:"可视化ID"},{default:e(()=>[i(a(o.value?.shortId),1)]),_:1}),t(l,{label:"最后更新"},{default:e(()=>[i(a(o.value?.lastUpdated),1)]),_:1}),t(l,{label:"UUID",span:2},{default:e(()=>[i(a(o.value?.id),1)]),_:1})]),_:1})]),_:1},8,["loading"]),t(I,{title:"生命周期日志",style:{"margin-top":"16px"}},{default:e(()=>[t(L,null,{default:e(()=>[(f(!0),D(E,null,F(p(h).logs,r=>(f(),M(N,{key:r.id},{default:e(()=>[u("p",null,[u("strong",null,a(r.action),1),i(" - "+a(r.timestamp),1)]),u("p",null,"操作人: "+a(r.user),1),u("p",null,"仓库: "+a(r.warehouseName),1)]),_:2},1024))),128))]),_:1})]),_:1})])])}}}),ee=H(q,[["__scopeId","data-v-91bde9d2"]]);export{ee as default};
